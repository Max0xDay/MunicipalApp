<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:MunicipalApp.ViewModels"
             xmlns:views="clr-namespace:MunicipalApp.Views"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="700"
             x:Class="MunicipalApp.Views.ReportWizardForm"
             x:DataType="vm:ReportWizardViewModel">

    <Design.DataContext>
        <vm:ReportWizardViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="*,Auto">
        <ContentControl Grid.Row="0" Content="{Binding CurrentPage}" Margin="20"/>

        <!-- Bottom Bar -->
    <Border Grid.Row="1" Background="{StaticResource CardBrush}"
        BorderBrush="{StaticResource InputBorderBrush}"
        BorderThickness="0,1,0,0"
        Padding="16 12 16 12">
        <!-- Removed ColumnSpacing (not supported in current Avalonia version); using element margins instead -->
        <Grid ColumnDefinitions="Auto,*,Auto" RowDefinitions="Auto,Auto">
                <!-- Progress Label (top, centered across middle column) -->
                <TextBlock Grid.Row="0" Grid.Column="1"
                           Text="{Binding ProgressText}"
                           HorizontalAlignment="Center"
                           FontSize="14"
                           Foreground="{DynamicResource ThemeAccentBrush}"/>

                <!-- Back Button (bottom left) -->
        <Button Grid.Row="1" Grid.Column="0"
            Content="Back"
            Command="{Binding BackCommand}"
            IsEnabled="{Binding CanGoBack}"
            Classes="secondary nofocus"
            MinWidth="100"
            Margin="0,0,24,0"/>

                <!-- Progress Bar (bottom center) -->
                <ProgressBar Grid.Row="1" Grid.Column="1"
                             Value="{Binding ProgressPercentage}"
                             Height="10"
                             CornerRadius="5"
                             Classes="modern"/>

                <!-- Right Side Buttons Container -->
                <StackPanel Grid.Row="1" Grid.Column="2" Orientation="Horizontal" Spacing="12" HorizontalAlignment="Right" Margin="24,0,0,0">
                    <Button Content="{Binding NextButtonText}"
                            Command="{Binding NextCommand}"
                            IsEnabled="{Binding CanGoNext}"
                            Classes="primary large nofocus"
                            MinWidth="110"/>
                    <Button Content="Admin"
                            Command="{Binding AdminCommand}"
                            Classes="accent nofocus"
                            MinWidth="90"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>